sudo: required
language: generic
matrix:
  include:
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
  - os: osx
    osx_image: xcode8.3
    language: generic
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=coverage
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=5
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=5
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=5
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=zpm
    - GCC_VERSION=5
global:
  env:
  - PROJECT=SyncLib
  - PROJECT_DIRECTORY=sync
install:
- source /dev/stdin <<< "$(curl -s https://raw.githubusercontent.com/Zefiros-Software/ZPM/features/refactor/script/install-zpm.sh)"
script:
- zpm run build-ci-library
after_success:
- zpm run deploy-ci-library
notifications:
  slack:
    secure: DuyCaBTEGYaTRV6z/6noBtdJRdQ7/oyxUqV5Ai1QOYu0wh8USWqT9+Qxvy5yw2zYNh9Lx1FGsCcN4h4fbGhEEMWgY4KVtbELyC3lyMl0aQPin5QFCCTeYznxuohipULa8DnOMGp/V6z5q5qHEt5dmePrvhUcN1t86aY1qxuhcR0o9r1fjpus7+hBLoDxKBBEUm9/Wet4nywyW1CKTE5+A8a75M+O9roqwcjQuKBYEKRwsYVviXFDljr81/1P7LNMiTVrL292ecMELN08QETxCwqTIIbQn0AndIVqQgyoW0WYUf4LuwqVO1U4UfUf7u7dbB6+cQQnpnye6TSQkREvnJyNM6k3dDdGUNjpNyrXmiwQIjFw5cskUNusCdai7edB9+FJaUEe1MWYlSDTvyyffFPyc0mHotE8jXIfmDgsKMv/O1eXh9hKb9AsqBiziCDb64IbRyYJxEPJqoGUA8fgq6oxAyhszT5UpK9JydGobzYjMBHlzl6cDLImdkxLBjEZHHJ1GzvDUt0AMjroP4AUxxwdxcOj23Z1/Y+G+tEmieIzMv9NMI64aW+Y0pFPSiXqfN9x5Ev0lgO7TArpt6uu/wOb8xeULgzDI670bvzaKlIKU28z8XYnfX1fmRki42cYe7DKE6hQJ5I5AkfTEBhMpjj7u1p+iOZ+O4ZXC6h2anc=
